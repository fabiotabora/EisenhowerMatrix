<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Matriz de Eisenhower ‚Äî Captura de prioridades</title>

  <style>
    :root{
      --bg:#0b0f19;
      --card:#121a2b;
      --muted:#8ea0c6;
      --text:#e9efff;
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.16);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--text);
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 20px 14px 60px;
    }

    h1{ font-size: 22px; margin-bottom: 6px; }
    p{ color: var(--muted); font-size: 14px; }

    .meta{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin: 16px 0;
    }

    input{
      width:100%;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#00000033;
      color:var(--text);
    }

    .matrix{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }

    .quad{
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:12px;
      background:#00000033;
    }

    .quad h3{
      font-size:14px;
      margin:0 0 6px;
    }

    textarea{
      width:100%;
      min-height:70px;
      margin-top:6px;
      padding:8px;
      border-radius:10px;
      border:1px solid var(--border);
      background:#00000055;
      color:var(--text);
    }

    button{
      margin-top:6px;
      padding:8px 12px;
      border-radius:10px;
      border:1px solid var(--border2);
      background:#ffffff14;
      color:var(--text);
      cursor:pointer;
    }

    .items{
      margin-top:8px;
      font-size:13px;
    }

    .item{
      border:1px solid var(--border);
      border-radius:10px;
      padding:6px;
      margin-top:4px;
    }

    .footer{
      margin-top:16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    @media (max-width: 720px){
      .meta, .matrix{
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
<div class="wrap">
  <h1>Matriz de Eisenhower</h1>
  <p>Escribe tus tareas directamente en el cuadrante correcto y luego presiona <strong>Submit</strong>.</p>

  <div class="meta">
    <input id="nombre" placeholder="Nombre (opcional)">
    <input id="equipo" placeholder="Equipo / Rol (opcional)">
  </div>

  <div class="matrix" id="matrix"></div>

  <div class="footer">
    <div id="status">Tareas agregadas: 0</div>
    <button onclick="submitAll()">Submit</button>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbzHUHW_PM19ivcyYtMXIlATVjXLmCwAPhSoFNk6W_4WcWvHJW5zjs-0CXPwysZbSlTw/exec";

const QUADRANTS = [
  { key:"IU", label:"üî• Importante + Urgente", importance:"Alta", urgency:"Alta" },
  { key:"IN", label:"üìÖ Importante + No urgente", importance:"Alta", urgency:"Baja" },
  { key:"NU", label:"ü§ù No importante + Urgente", importance:"Baja", urgency:"Alta" },
  { key:"NN", label:"üóë No importante + No urgente", importance:"Baja", urgency:"Baja" }
];

let items = [];

function render(){
  const matrix = document.getElementById("matrix");
  matrix.innerHTML = "";

  QUADRANTS.forEach(q => {
    const div = document.createElement("div");
    div.className = "quad";
    div.innerHTML = `
      <h3>${q.label}</h3>
      <textarea placeholder="Escribe una tarea..."></textarea>
      <button>Agregar</button>
      <div class="items"></div>
    `;

    const textarea = div.querySelector("textarea");
    const btn = div.querySelector("button");
    const list = div.querySelector(".items");

    btn.onclick = () => {
      if (!textarea.value.trim()) return;
      items.push({
        quadrantLabel: q.label,
        importance: q.importance,
        urgency: q.urgency,
        task: textarea.value.trim()
      });
      textarea.value = "";
      update();
    };

    matrix.appendChild(div);
  });
}

function update(){
  document.getElementById("status").textContent = `Tareas agregadas: ${items.length}`;
  document.querySelectorAll(".items").forEach(el => el.innerHTML = "");
  items.forEach(it => {
    const idx = QUADRANTS.findIndex(q => q.label === it.quadrantLabel);
    const container = document.querySelectorAll(".items")[idx];
    const d = document.createElement("div");
    d.className = "item";
    d.textContent = it.task;
    container.appendChild(d);
  });
}

async function submitAll(){
  if (!items.length) {
    alert("Agrega al menos una tarea");
    return;
  }

  const payload = {
    nombre: document.getElementById("nombre").value,
    equipo: document.getElementById("equipo").value,
    items
  };

  document.getElementById("status").textContent = "Enviando‚Ä¶";

  const res = await fetch(ENDPOINT_URL, {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify(payload)
  });

  if (res.ok) {
    items = [];
    update();
    document.getElementById("status").textContent = "‚úÖ Enviado correctamente";
  } else {
    document.getElementById("status").textContent = "‚ùå Error al enviar";
  }
}

render();
</script>
</body>
</html>
